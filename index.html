<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Welcome to the Internet!</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Creepster&family=Nosifer&family=Rubik+Burned&display=swap" rel="stylesheet">

    <style>
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            font-family: 'Creepster', cursive;
        }

        #bg-video {
            position: fixed;
            inset: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: -1;
        }

        #overlay-text {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #ff2a00;
            font-size: 5.8vw;
            text-align: center;
            pointer-events: none;
            z-index: 10;
            text-shadow: 0 0 10px #ff4500, 0 0 30px #ff0000, 0 0 60px #ff0000, 0 0 100px #8b0000;
            -webkit-text-stroke: 1.5px #000;
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        #overlay-text.blink {
            animation: blink 1.2s infinite alternate;
        }

        @keyframes blink {
            0%   { opacity: 0.3; transform: scale(0.97); }
            100% { opacity: 1.0; transform: scale(1.03); }
        }

        /* –ö–Ω–æ–ø–∫–∞ –∑–≤—É–∫–∞ */
        #sound-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 20;
            background: rgba(0,0,0,0.7);
            color: #ff2a00;
            border: 2px solid #ff4500;
            padding: 12px 20px;
            font-family: 'Creepster', cursive;
            font-size: 1.2em;
            cursor: pointer;
            border-radius: 8px;
            text-shadow: 0 0 8px #ff0000;
            transition: all 0.3s;
        }
        #sound-btn:hover {
            background: #ff4500;
            color: #000;
            box-shadow: 0 0 20px #ff0000;
        }
    </style>
</head>
<body>

<video id="bg-video" autoplay loop playsinline poster="poster.jpg">
    <source src="wideo.mp4" type="video/mp4">
    –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ.
</video>

<div id="overlay-text">
    –ù–ï –û–¢–ö–†–´–í–ê–ô–¢–ï<br>üî• –°–¢–†–ê–ù–ù–´–ï –°–°–´–õ–ö–ò üî•
</div>

<!-- –ö–Ω–æ–ø–∫–∞ –∑–≤—É–∫–∞ -->
<button id="sound-btn">üîá –í–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫</button>

<script>
// –ù–ê–°–¢–†–û–ô–ö–ò ‚Äî –º–µ–Ω—è–π –∑–¥–µ—Å—å
const TEXT_PHASES = [
    { start: 5, duration: 13, text: "–ù–ï –û–¢–ö–†–´–í–ê–ô–¢–ï\nüî• –°–¢–†–ê–ù–ù–´–ï –°–°–´–õ–ö–ò üî•", blink: true  },
    { start: 45, duration: 15, text: "üî•–ù–ï –¢–û–†–û–ü–ò–¢–ï–°–¨üî•\n –ß–∏—Ç–∞–π—Ç–µ, —á—Ç–æ –≤—ã –¥–µ–ª–∞–µ—Ç–µ –Ω–∞ —ç–∫—Ä–∞–Ω–µ", blink: true  },
    { start: 80, duration: 20, text: "üî•–í–ù–ò–ú–ê–ù–ò–ï –ù–ê –î–ï–¢–ê–õ–òüî•\n–î–æ–º–µ–Ω–Ω–æ–µ –∏–º—è —Å–∞–π—Ç–∞ –Ω–µ –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ª–∏—à–Ω–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤ –∏–ª–∏ –æ–ø–µ—á–∞—Ç–æ–∫", blink: true },
    { start: 120, duration: 20, text: "üî•–†–û–î–ò–ù–ê –°–õ–£–®–ê–ï–¢üî•\n–°–∫–∞—á–∏–≤–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –∏–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤!\n–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∞–π—Ç—ã!", blink: true  },
    { start: 160, duration: 20, text: "üî•–ù–£–ñ–ù–û –ë–û–õ–¨–®–ï –ó–û–õ–û–¢–êüî•\n–ò–∑–±–µ–≥–∞–π—Ç–µ —Å–æ–≤–µ—Ä—à–µ–Ω–∏—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∏–ª–∏ –ø–µ—Ä–µ–¥–∞—á–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ –æ–±—â–µ–¥–æ—Å—Ç—É–ø–Ω—ã–º Wi-Fi —Å–µ—Ç—è–º", blink: true  },
    { start: 200, duration: 13, text: "–í–∫–ª—é—á–∏—Ç–µ –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –≤–µ–∑–¥–µ, –≥–¥–µ —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ. –ù–∏–∫–æ–º—É –∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –æ–∑–≤—É—á–∏–≤–∞–π—Ç–µ –ø–∞—Ä–æ–ª–∏ –∏/–∏–ª–∏ –°–ú–°-–∫–æ–¥—ã", blink: true  }
];

const video = document.getElementById('bg-video');
const overlay = document.getElementById('overlay-text');
const soundBtn = document.getElementById('sound-btn');

let currentPhaseIndex = -1;
let videoDuration = 0;  // –î–ª—è —Ä–∞—Å—á—ë—Ç–∞ —Ü–∏–∫–ª–æ–≤

// –ü–æ–ª—É—á–∞–µ–º –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–∏–¥–µ–æ (–æ—Å–Ω–æ–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫)
video.addEventListener('loadedmetadata', () => {
    videoDuration = video.duration || 0;
    console.log('–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–∏–¥–µ–æ (loadedmetadata):', videoDuration);
});

// –î–ª—è –Ω–∞–¥—ë–∂–Ω–æ–≥–æ loop
video.addEventListener('ended', () => {
    video.play();
});

// –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∑–≤—É–∫–∞
function toggleSound() {
    video.muted = !video.muted;
    soundBtn.textContent = video.muted ? 'üîá –í–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫' : 'üîä –í—ã–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫';
    soundBtn.style.background = video.muted ? 'rgba(0,0,0,0.7)' : '#ff4500';
}
soundBtn.addEventListener('click', toggleSound);

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–∏–Ω–∞–µ–º —Å –≤—ã–∫–ª—é—á–µ–Ω–Ω–æ–≥–æ –∑–≤—É–∫–∞
video.muted = true;

// –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞
function updateOverlay() {
    const t = video.currentTime;

    // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ–º –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –µ—Å–ª–∏ –µ—â—ë –Ω–µ –ø–æ–ª—É—á–µ–Ω–∞ (–Ω–∞ —Å–ª—É—á–∞–π –∑–∞–¥–µ—Ä–∂–µ–∫)
    if (videoDuration === 0) {
        videoDuration = video.duration || 0;
        if (videoDuration > 0) {
            console.log('–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–∏–¥–µ–æ (–æ–±–Ω–æ–≤–ª–µ–Ω–æ –≤ update):', videoDuration);
        }
    }

    const cycleTime = videoDuration > 0 ? t % videoDuration : t;  // –î–ª—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –≤ —Ü–∏–∫–ª–µ

    let activePhase = null;

    // –ò—â–µ–º –ø–æ–¥—Ö–æ–¥—è—â—É—é —Ñ–∞–∑—É
    for (let i = TEXT_PHASES.length - 1; i >= 0; i--) {
        const phase = TEXT_PHASES[i];
        if (cycleTime >= phase.start && cycleTime < phase.start + phase.duration) {
            activePhase = phase;
            break;
        }
    }

    if (activePhase) {
        if (currentPhaseIndex !== TEXT_PHASES.indexOf(activePhase)) {
            overlay.innerHTML = activePhase.text.replace(/\n/g, '<br>');
            overlay.classList.toggle('blink', activePhase.blink);
            currentPhaseIndex = TEXT_PHASES.indexOf(activePhase);
        }
        overlay.style.opacity = '1';
    } else {
        overlay.style.opacity = '0';
        overlay.classList.remove('blink');  // –£–±–∏—Ä–∞–µ–º –∫–ª–∞—Å—Å –º–∏–≥–∞–Ω–∏—è –ø—Ä–∏ —Å–∫—Ä—ã—Ç–∏–∏ (—Ñ–∏–∫—Å –≤–æ–∑–º–æ–∂–Ω–æ–≥–æ –±–∞–≥–∞)
        currentPhaseIndex = -1;
    }
}

video.addEventListener('timeupdate', updateOverlay);

// –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –≤–∏–¥–µ–æ
video.play().catch(error => {
    console.error('–û—à–∏–±–∫–∞ autoplay:', error);
});

// –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
document.body.addEventListener('touchstart', () => video.play(), { once: true });

// –î–µ–±–∞–≥: –ª–æ–≥–∏—Ä—É–µ–º –≤—Ä–µ–º—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
video.addEventListener('timeupdate', () => {
    console.log('–í—Ä–µ–º—è:', video.currentTime.toFixed(1));
});
</script>
</body>
</html>
