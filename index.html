<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>–ì–æ—Ä—è—â–∏–π —Ç–µ–∫—Å—Ç –Ω–∞ —Ñ–æ–Ω–µ</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Creepster&family=Nosifer&family=Rubik+Burned&display=swap" rel="stylesheet">

    <style>
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            font-family: 'Creepster', cursive;
        }

        #bg-video {
            position: fixed;
            inset: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: -1;
        }

        #overlay-text {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #ff2a00;
            font-size: 5.8vw;
            text-align: center;
            pointer-events: none;
            z-index: 10;
            text-shadow: 0 0 10px #ff4500, 0 0 30px #ff0000, 0 0 60px #ff0000, 0 0 100px #8b0000;
            -webkit-text-stroke: 1.5px #000;
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        #overlay-text.blink {
            animation: blink 1.2s infinite alternate;
        }

        @keyframes blink {
            0%   { opacity: 0.3; transform: scale(0.97); }
            100% { opacity: 1.0; transform: scale(1.03); }
        }

        /* –ö–Ω–æ–ø–∫–∞ –∑–≤—É–∫–∞ */
        #sound-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 20;
            background: rgba(0,0,0,0.7);
            color: #ff2a00;
            border: 2px solid #ff4500;
            padding: 12px 20px;
            font-family: 'Creepster', cursive;
            font-size: 1.2em;
            cursor: pointer;
            border-radius: 8px;
            text-shadow: 0 0 8px #ff0000;
            transition: all 0.3s;
        }
        #sound-btn:hover {
            background: #ff4500;
            color: #000;
            box-shadow: 0 0 20px #ff0000;
        }
    </style>
</head>
<body>

<video id="bg-video" autoplay loop playsinline poster="poster.jpg">
    <source src="wideo.mp4" type="video/mp4">
    –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ.
</video>

<div id="overlay-text">
    –ù–ï –û–¢–ö–†–´–í–ê–ô–¢–ï<br>üî• –°–¢–†–ê–ù–ù–´–ï –°–°–´–õ–ö–ò üî•
</div>

<!-- –ö–Ω–æ–ø–∫–∞ –∑–≤—É–∫–∞ -->
<button id="sound-btn">üîá –í–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫</button>

<script>
// –ù–ê–°–¢–†–û–ô–ö–ò ‚Äî –º–µ–Ω—è–π –∑–Ω–∞—á–µ–Ω–∏—è –∑–¥–µ—Å—å
const SETTINGS = {
    firstAppearDelay: 5,    // –ß–µ—Ä–µ–∑ —Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ –ø–æ—Å–ª–µ –Ω–∞—á–∞–ª–∞ –≤–∏–¥–µ–æ/—Ü–∏–∫–ª–∞ –≤–ø–µ—Ä–≤—ã–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—Å—Ç
    visibleDuration: 15,       // –°–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ —Ç–µ–∫—Å—Ç –≤–∏–¥–µ–Ω –∏ –º–∏–≥–∞–µ—Ç
    pauseDuration: 30,         // –ù–û–í–ê–Ø: —á–µ—Ä–µ–∑ —Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ –ø–æ—Å–ª–µ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è —Ç–µ–∫—Å—Ç –ø–æ—è–≤–∏—Ç—Å—è —Å–Ω–æ–≤–∞ (–ø–∞—É–∑–∞ –º–µ–∂–¥—É –ø–æ—è–≤–ª–µ–Ω–∏—è–º–∏)
    blinkInterval: 1.5,       // –°–∫–æ—Ä–æ—Å—Ç—å –º–∏–≥–∞–Ω–∏—è (–º–µ–Ω—å—à–µ = –±—ã—Å—Ç—Ä–µ–µ)
};

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

const video = document.getElementById('bg-video');
const textOverlay = document.getElementById('overlay-text');  // –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–ª–∏ –¥–ª—è —è—Å–Ω–æ—Å—Ç–∏
const soundBtn = document.getElementById('sound-btn');

let isVisible = false;
let videoDuration = 0;  // –ë—É–¥–µ–º —Ö—Ä–∞–Ω–∏—Ç—å –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–∏–¥–µ–æ –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ —Ü–∏–∫–ª–æ–≤

// –ü–æ–ª—É—á–∞–µ–º –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–∏–¥–µ–æ (–¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ–≥–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è)
video.addEventListener('loadedmetadata', () => {
    videoDuration = video.duration;
    console.log('–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–∏–¥–µ–æ:', videoDuration);  // –î–ª—è –¥–µ–±–∞–≥–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏
});

// –î–ª—è –Ω–∞–¥—ë–∂–Ω–æ–≥–æ loop (–Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ –∞—Ç—Ä–∏–±—É—Ç loop –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ)
video.addEventListener('ended', () => {
    video.play();
    console.log('–í–∏–¥–µ–æ –∑–∞–∫–æ–Ω—á–∏–ª–æ—Å—å, –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º');  // –î–µ–±–∞–≥
});

// –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∑–≤—É–∫–∞
function toggleSound() {
    video.muted = !video.muted;
    soundBtn.textContent = video.muted ? 'üîá –í–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫' : 'üîä –í—ã–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫';
    soundBtn.style.background = video.muted ? 'rgba(0,0,0,0.7)' : '#ff4500';
}
soundBtn.addEventListener('click', toggleSound);

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–∏–Ω–∞–µ–º —Å –≤—ã–∫–ª—é—á–µ–Ω–Ω–æ–≥–æ –∑–≤—É–∫–∞
video.muted = true;

// –õ–æ–≥–∏–∫–∞ –ø–æ—è–≤–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ —Å –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ–º —á–µ—Ä–µ–∑ –ø–∞—É–∑—É
function updateText() {
    const t = video.currentTime;
    console.log('–¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è:', t);  // –î–µ–±–∞–≥: –ø—Ä–æ–≤–µ—Ä—å –≤ –∫–æ–Ω—Å–æ–ª–∏ (F12), —á—Ç–æ –≤—Ä–µ–º—è –º–µ–Ω—è–µ—Ç—Å—è –∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è

    // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é –≤ —Ü–∏–∫–ª–µ (—Å —É—á—ë—Ç–æ–º loop)
    const cycleTime = videoDuration > 0 ? t % videoDuration : t;

    // –ü–æ–ª–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø–æ—è–≤–ª–µ–Ω–∏—è: visible + pause
    const fullCycle = SETTINGS.visibleDuration + SETTINGS.pauseDuration;

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø–æ–ø–∞–¥–∞–µ—Ç –ª–∏ –≤—Ä–µ–º—è –≤ –æ–∫–Ω–æ –≤–∏–¥–∏–º–æ—Å—Ç–∏ (—Å –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è–º–∏)
    const positionInCycle = (cycleTime - SETTINGS.firstAppearDelay) % fullCycle;

    if (positionInCycle >= 0 && positionInCycle < SETTINGS.visibleDuration) {
        if (!isVisible) {
            textOverlay.style.opacity = '1';
            textOverlay.classList.add('blink');
            // textOverlay.classList.add('fire');  // –ï—Å–ª–∏ —Ö–æ—á–µ—à—å –æ–≥–æ–Ω—å
            isVisible = true;
            console.log('–¢–µ–∫—Å—Ç –ø–æ–∫–∞–∑–∞–Ω –Ω–∞ –≤—Ä–µ–º–µ–Ω–∏:', t);
        }
    } else {
        if (isVisible) {
            textOverlay.style.opacity = '0';
            textOverlay.classList.remove('blink');
            // textOverlay.classList.remove('fire');
            isVisible = false;
            console.log('–¢–µ–∫—Å—Ç —Å–∫—Ä—ã—Ç –Ω–∞ –≤—Ä–µ–º–µ–Ω–∏:', t);
        }
    }
}

// –û–±–Ω–æ–≤–ª—è–µ–º –Ω–∞ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏
video.addEventListener('timeupdate', updateText);

// –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –≤–∏–¥–µ–æ (–Ω–∞ —Å–ª—É—á–∞–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ autoplay)
video.play().catch(error => {
    console.error('–û—à–∏–±–∫–∞ autoplay:', error);
});

// –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
document.body.addEventListener('touchstart', () => video.play(), { once: true });

</script>
</body>
</html>
